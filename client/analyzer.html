<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>⚡ Resume Analyzer ⚡</title>

<!-- Bootstrap & Fonts -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ------------------ BODY & BACKGROUND ------------------ */
body {
    margin: 0;
    font-family: 'Orbitron', sans-serif;
    background-image: url('source.gif'); 
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;

    color: #ff0000; /* Main red color */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    position: relative;
}

body::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6); 
    z-index: 0;
}

/* ------------------ HEADER ------------------ */
.header {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 40px;
    text-align: center;
    color: #ff0000; 
    position: relative;
    z-index: 1;
}

/* ------------------ SCORE CARD ------------------ */
.score-card {
    width: 80%;
    max-width: 600px;
    background: rgba(26, 26, 26, 0.85); 
    border: 2px solid #ff0000; 
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    transition: transform 0.2s;
    position: relative;
    z-index: 1;
}

.score-card:hover {
    transform: translateY(-2px);
}

/* ------------------ SCORE TEXT ------------------ */
.score-text {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
    color: #ff0000; 
}

/* ------------------ PROGRESS BAR ------------------ */
.progress {
    height: 25px;
    border-radius: 15px;
    background: #222;
}

.progress-bar {
    height: 100%;
    font-weight: bold;
    font-size: 16px;
    color: black;
    text-align: center;
    transition: width 1s ease-in-out;
    background: linear-gradient(90deg, #ff0000, #ff5555); 
}

/* ------------------ BACK BUTTON ------------------ */
.btn-back {
    display: block;
    width: 200px;
    margin: 30px auto 0 auto;
    background: #ff0000; 
    color: #0b0a0a;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    padding: 10px;
    font-size: 16px;
    transition: 0.2s;
    position: relative;
    z-index: 1;
}

.btn-back:hover {
    background: #ff5555;
}
</style>
</head>
<body>

<div class="header">⚡ Resume Analyzer ⚡</div>

<div class="score-card">
    <div class="score-text" id="scoreText">Calculating Score...</div>
    <div class="progress">
        <div class="progress-bar" id="scoreBar" style="width: 0%">0%</div>
    </div>
</div>

<button class="btn-back" onclick="goBack()">⬅ Back to Resume Builder</button>

<script>
// Go back function
function goBack() {
    window.location.href = "index.html";
}

// Load resume data
const resumeData = JSON.parse(localStorage.getItem("resumeData") || "{}");

// ---------------- Calculate Score ----------------
const weights = {
    skills: 0.3,
    projects: 0.25,
    experience: 0.2,
    achievements: 0.15,
    certifications: 0.1
};

function parseList(str) {
    if(!str) return [];
    return str.split(/[,;\n]+/).map(s=>s.trim()).filter(Boolean);
}

function sectionScore(list, maxCount=5) {
    return Math.min(list.length / maxCount, 1);
}

const skillsScore = sectionScore(parseList(resumeData.skills));
const projectsScore = sectionScore(parseList(resumeData.projects));
const experienceScore = sectionScore(resumeData.experience ? resumeData.experience.split(/\n/) : []);
const achievementsScore = sectionScore(parseList(resumeData.achievements));
const certificationsScore = sectionScore(parseList(resumeData.certifications));

const overallScore = Math.round(
    (skillsScore*weights.skills + 
    projectsScore*weights.projects + 
    experienceScore*weights.experience + 
    achievementsScore*weights.achievements + 
    certificationsScore*weights.certifications) * 100
);

// Animate progress bar
const scoreBar = document.getElementById("scoreBar");
const scoreText = document.getElementById("scoreText");
let progress = 0;
const interval = setInterval(()=>{
    if(progress >= overallScore) {
        clearInterval(interval);
    } else {
        progress++;
        scoreBar.style.width = progress + "%";
        scoreBar.textContent = progress + "%";
    }
}, 15);

scoreText.textContent = `Resume Score: ${overallScore}%`;
scoreBar.style.width = overallScore + "%";
scoreBar.textContent = overallScore + "%";
</script>

</body>
</html>
